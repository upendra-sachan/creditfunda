var office_pin_code=new Array,pin_code_array=new Array,bureauCustomer="NO_HIT";$(document).ready(function(){getSliderForAmountAndTenure(),$(document).on("click",".property_city_text",function(){$(".serch_open").removeClass("hide"),$("#myInput").focus()}),$(".close_icon").click(function(){$(".serch_open").addClass("hide")}),$(document).on("click","#myInput",function(){$("#myInput").attr("placeholder","")}),$(document).click(function(e){var a=e.target;$(a).is(".property_city_text")||$(a).parents().is(".property_city_text")||$(a).is(".city_list")||$(a).is("#myInput")||$(a).is("#myUL")||$(".serch_open").addClass("hide")}),$(".otp_modal_container, .otp-overlay").hide(),$(".numericOnly").on("keypress keyup blur",function(e){$(this).val($(this).val().replace(/[^\d].+/,"")),(e.which<48||e.which>57)&&e.preventDefault()}),$(document).on("keypress","input[name='loan_amt']",function(e){return formatValidatorNew(e,$(this),"","","",5,"","","","","")}),$(document).on("keypress","input[name='property_cost']",function(e){return formatValidatorNew(e,$(this),"","","",5,"","","","","")}),$(document).on("keypress","input[name='annual_income']",function(e){return formatValidatorNew(e,$(this),"","","",5,"","","","","")}),$(document).on("keypress","input[name='emi']",function(e){return formatValidatorNew(e,$(this),"","","",5,"","","","","")}),$(document).on("keypress","input[name='mob_number']",function(e){return formatValidatorNew(e,$(this),"","","",19,"","","","","")}),$(document).on("keypress","input[name='fullname']",function(e){return formatValidatorNew(e,$(this),"","","",2,"","","","","")}),$(document).on("blur","input[name='email']",function(e){formatValidatorNew("",$("#email"),"","","",20,"","",6,31,"")?$("#email").addClass("valid"):($("#email").val(""),$(".email_error").text("Please enter valid email address"),$("#email").addClass("error"),$("#email").removeClass("valid"))}),$("#loan_amt").on("change",function(){var e=unformatMoney($("#loan_amt").val());(e>0&&e<=15e5?$("#property_approved_div").removeClass("hide"):$("#property_approved_div").addClass("hide"),e>=15e5&&$("#bureau_fileds").addClass("display-none"),e<15e5)&&(10==$("#mob_number").val().length&&checkCustomerBureau())}),$(document).on("blur","input[name='fullname']",function(e){var a=$("#fullname").val(),t=(a=a.replace(/^\s+|\s+$/g,"")).split(" ");""===a||a.length<3||t.length<2?($(".fullname").addClass("error"),$("#fullname").removeClass("valid")):$("#fullname").addClass("valid")}),$("input[name=employment_type]:radio").change(function(){1==$("input#6").prop("checked")?$("input[name=employment_type]").val("1"):$("input[name=employment_type]").val("2")}),$("input[name=property_type]:radio").change(function(){1==$("input#8").prop("checked")?$("input[name=property_type]").val("15"):1==$("input#9").prop("checked")?$("input[name=property_type]").val("16"):1==$("input#10").prop("checked")?$("input[name=property_type]").val("17"):$("input[name=property_type]").val("18")}),$(".autotab").keyup(function(){this.value.length==this.maxLength&&$(this).next(".autotab").focus()}),$(".otp_digit_1").keyup(function(e){var a=e.keyCode||e.charCode;8==a||46==a?$(this).val(""):1==$(this).val().length&&$(".otp_digit_2").focus()}),$(".otp_digit_2").keyup(function(e){var a=e.keyCode||e.charCode;8==a||46==a?($(this).val(""),$(".otp_digit_1").val(""),$(".otp_digit_1").focus()):1==$(this).val().length&&$(".otp_digit_3").focus()}),$(".otp_digit_3").keyup(function(e){var a=e.keyCode||e.charCode;8==a||46==a?($(this).val(""),$(".otp_digit_2").val(""),$(".otp_digit_2").focus()):1==$(this).val().length&&$(".otp_digit_4").focus()}),$(".otp_digit_4").keyup(function(e){var a=e.keyCode||e.charCode;8!=a&&46!=a||($(this).val(""),$(".otp_digit_3").val(""),$(".otp_digit_3").focus())}),$(document).on("keyup","#txtDate",function(e){var a=e.keyCode||e.charCode;2!=$(this).val().length&&5!=$(this).val().length||8==a||46==a||$(this).val($(this).val()+"-")}),$(document).on("keyup",".amount",function(){$(this).attr("key-value",$(this).val()),$(this).val(rupeeFormat($(this).val()))}),$(document).on("click",".accordian-li",function(){var e=$(this),a=$(e).attr("sort-attr"),t=$(e).attr("sort-type"),r=$(this).find("span");if(null!=a){showLoader("loading","display-block");var o=$(e).attr("field-value");return data="step=backscreen&screen_show="+o+"&type="+t+"&indexType="+a,$.ajax({type:"POST",url:"/"+page_action_url+"/",data:data,dataType:"json",success:function(a){"success"==a.status?($("#main_content").html(a.html),getSliderForAmountAndTenure(),setTimeout(function(){"asc"==t?($(e).attr("sort-type","desc"),$(r).addClass("sort_asc_active")):($(e).attr("sort-type","asc"),$(r).addClass("sort_desc_active")),showLoader("loading","display-none")},100)):"error"==a.status&&($("#err-msg").html(a.error_message),$("#err-msg").addClass("message-error m5b"),window.scrollTo(0,100),showLoader("loading","display-none"))}}),!1}}),$(".otp_digit_4").on("keyup",function(){""!=$(".otp_digit_1").val()&&""!=$(".otp_digit_2").val()&&""!=$(".otp_digit_3").val()&&""!=$(".otp_digit_4").val()&&(verifyOTPCode(),$(this).trigger("blur"))}),$(document).on("click",".otp_close_icon",function(){$("body").removeClass("ofH p-F"),$(".otp_modal_container").addClass("hide"),$(".otp_modal_container, .otp-overlay").hide()}),$(document).on("click","#change_mobile_number",function(){$(".mob_number").val("").focus(),$(".otp_digit_1").val(""),$(".otp_digit_2").val(""),$(".otp_digit_3").val(""),$(".otp_digit_4").val(""),$("body").removeClass("ofH p-F"),$(".otp_modal_container").addClass("hide"),$(".otp_modal_container, .otp-overlay").hide()}),$(document).on("click","#request_otp_again",function(){$("#request_otp_again").hide(),$("#not_receive_otp").show();var e=$("#mob_number");$.ajax({type:"POST",url:"/"+page_action_url+"/",data:"step=resend_code&mobile_number="+e,dataType:"json",success:function(e){"success"==e.status?($("#not_receive_otp").show(),$("#request_otp_again").show(),setTimeout(function(){$("#resend_validator").html("<span>SMS has been sent. Please verify with OTP code</span>")},1e3)):"error"==e.status&&($("#not_receive_otp").show(),$("#request_otp_again").show())}})}),$(document).on("click",".backBtn",function(){$(".step-1-form").show(),$(".step-2-form").addClass("hide")}),$("div").hasClass("step-1-form")||$("body,html").animate({scrollTop:74},800),$("#loan_amt").on("keyup",function(e){$(".loan_amt_error").text("Please enter required loan amount"),$(".loan_amt").removeClass("error"),$(".loan_amt_inword").html(numberToWordConvertor(unformatMoney($("#loan_amt").val())))}),$("#loan_amt").on("blur",function(){0==$("#loan_amt").val()||$("#loan_amt").val().length>14?($("#loan_amt").removeClass("valid"),$("#loan_amt").val("0"),$(".loan_amt").addClass("error"),$(".loan_amt_error").text("Incorrect Loan Amount"),$(".loan_amt_inword").text("")):($("#loan_amt").addClass("valid"),$(".loan_amt_inword").html(numberToWordConvertor(unformatMoney($("#loan_amt").val()))))}),$("#property_city_text").on("blur",function(){""!=$("#property_city").val()&&0!=$("#property_city").val()&&""!=$("#property_city_text").val()||$(".property_city_text").removeClass("valid")}),$("#mob_number").on("blur",function(){10==$("#mob_number").val().length?$("#mob_number").addClass("valid"):$("#mob_number").removeClass("valid")}),$(document).on("keyup","#property_cost",function(){$(".property_cost_error").text("Please enter required Property Cost"),$(".property_cost").removeClass("error"),$(".property_cost_inword").html(numberToWordConvertor(unformatMoney($("#property_cost").val())))}),$(document).on("blur","#property_cost",function(){var e=unformatMoney($("#loan_amt").val()),a=unformatMoney($("#property_cost").val()),t=0;t=75e4==e?1e5:175e4==e?15e5:25e5==e?2e6:4e6==e?3e6:625e4==e?5e6:75e5,$("#loan_amt").val()>0&&parseInt(a)<parseInt(t)?($("#property_cost").removeClass("valid"),$("#property_cost").val(""),$(".property_cost_inword").html(""),$(".property_cost_error").text("Property Cost should be greater than loan amount"),$("#property_cost").addClass("error")):0==$("#property_cost").val()||$("#property_cost").val().length>14?($("#property_cost").removeClass("valid"),$("#property_cost").val(""),$(".property_cost_error").text("Incorrect Property Cost"),$(".property_cost").addClass("error"),$(".property_cost_inword").text("")):($("#property_cost").addClass("valid"),$(".property_cost_inword").html(numberToWordConvertor(unformatMoney($("#property_cost").val()))))}),$("#annual_income").on("keyup",function(e){$(".annual_income_error").text("Please enter amount you get annually"),$(".annual_income").removeClass("error"),$(".annual_income_inword").html(numberToWordConvertor(unformatMoney($("#annual_income").val())))}),$("#annual_income").on("blur",function(){0==$("#annual_income").val()||$("#annual_income").val().length>14?($("#annual_income").removeClass("valid"),$("#annual_income").val(""),$(".annual_income").addClass("error"),$(".annual_income_error").text("Incorrect Annual Income"),$(".annual_income_inword").text("")):($("#annual_income").addClass("valid"),$(".annual_income_inword").html(numberToWordConvertor(unformatMoney($("#annual_income").val()))))}),$("#emi").on("blur",function(){$("#emi").addClass("valid"),$(".emi_inword").html(numberToWordConvertor(unformatMoney($("#emi").val())))}),$(".dob").on("blur",function(){date_of_birth_validation()}),$(document).on("keypress","input[name='dob']",function(e){if((e.which<48||e.which>57)&&8!=e.which&&46!=e.which)return!1}),$("#mob_number").on("keyup",function(e){$(".mob_number").removeClass("error"),$(".mobile_number_verification").show(),10==$("#mob_number").val().length&&formatValidatorNew("",$("#mob_number"),"","","",19,"","","","","")&&checkCustomerBureau()}),$("#loan_amt").on("focus",function(e){$(".loan_amt").removeClass("error"),$(".property_city_text").removeClass("error"),$(".property_cost").removeClass("error"),$(".annual_income").removeClass("error"),$(".mob_number").removeClass("error")}),$("#property_city_text").on("focus",function(e){$("#myInput").attr("placeholder","Type here to search City Name"),$(".property_city_text").removeClass("error"),$(".property_cost").removeClass("error"),$(".annual_income").removeClass("error"),$(".mob_number").removeClass("error"),""!=$("#loan_amt").val()&&0!=$("#loan_amt").val()||($("#loan_amt").val("0"),$(".loan_amt").addClass("error"))}),$("#property_cost").on("focus",function(e){$(".property_cost").removeClass("error"),$(".annual_income").removeClass("error"),$(".mob_number").removeClass("error"),""!=$("#loan_amt").val()&&0!=$("#loan_amt").val()||($("#loan_amt").val("0"),$("#loan_amt").addClass("error")),""!=$("#property_city").val()&&0!=$("#property_city").val()&&""!=$("#property_city_text").val()||$(".property_city_text").addClass("error")}),$("#annual_income").on("focus",function(e){$(".annual_income").removeClass("error"),$(".mob_number").removeClass("error"),""!=$("#loan_amt").val()&&0!=$("#loan_amt").val()||($("#loan_amt").val("0"),$(".loan_amt").addClass("error")),""!=$("#property_city").val()&&0!=$("#property_city").val()&&""!=$("#property_city_text").val()||$(".property_city_text").addClass("error"),""!=$("#property_cost").val()&&0!=$("#property_cost").val()||($("#property_cost").val(""),$(".property_cost").addClass("error"))}),$("#mob_number").on("focus",function(e){$(".mob_number").removeClass("error"),""!=$("#loan_amt").val()&&0!=$("#loan_amt").val()||($("#loan_amt").val("0"),$(".loan_amt").addClass("error")),""!=$("#property_city").val()&&0!=$("#property_city").val()&&""!=$("#property_city_text").val()||$(".property_city_text").addClass("error"),""!=$("#property_cost").val()&&0!=$("#property_cost").val()||($("#property_cost").val(""),$(".property_cost").addClass("error")),""!=$("#annual_income").val()&&0!=$("#annual_income").val()||($("#annual_income").val(""),$(".annual_income").addClass("error"))}),$("#fullName").on("focus",function(e){$("#fullName").removeClass("error"),""!=$("#mob_number").val()&&0!=$("#mob_number").val()&&""!=$("#mob_number").val()||$(".mob_number").addClass("error"),""!=$("#loan_amt").val()&&0!=$("#loan_amt").val()||($("#loan_amt").val("0"),$(".loan_amt").addClass("error")),""!=$("#property_city").val()&&0!=$("#property_city").val()&&""!=$("#property_city_text").val()||$(".property_city_text").addClass("error"),""!=$("#property_cost").val()&&0!=$("#property_cost").val()||($("#property_cost").val(""),$(".property_cost").addClass("error")),""!=$("#annual_income").val()&&0!=$("#annual_income").val()||($("#annual_income").val(""),$(".annual_income").addClass("error"))}),$("#emailAddress").on("focus",function(e){$("#emailAddress").removeClass("error"),""!=$("#fullName").val()&&0!=$("#fullName").val()&&""!=$("#fullName").val()||$("#fullName").addClass("error"),""!=$("#mob_number").val()&&0!=$("#mob_number").val()&&""!=$("#mob_number").val()||$(".mob_number").addClass("error"),""!=$("#loan_amt").val()&&0!=$("#loan_amt").val()||($("#loan_amt").val("0"),$(".loan_amt").addClass("error")),""!=$("#property_city").val()&&0!=$("#property_city").val()&&""!=$("#property_city_text").val()||$(".property_city_text").addClass("error"),""!=$("#property_cost").val()&&0!=$("#property_cost").val()||($("#property_cost").val(""),$(".property_cost").addClass("error")),""!=$("#annual_income").val()&&0!=$("#annual_income").val()||($("#annual_income").val(""),$(".annual_income").addClass("error"))}),$("#emi").on("focus",function(e){$(".fullname").removeClass("error"),$(".dob").removeClass("error"),$(".email").removeClass("error")}),$("#fullname").on("focus",function(e){$(".fullname").removeClass("error")}),$("#fullname").on("focus",function(e){$(".fullname").removeClass("error"),$(".dob").removeClass("error"),$(".email").removeClass("error")}),$(".dob").on("focus",function(e){$(".dob").removeClass("error"),$(".email").removeClass("error"),""==$("#fullname").val()&&$(".fullname").addClass("error")}),$("#email").on("focus",function(e){$(".email").removeClass("error"),""==$("#fullname").val()&&$(".fullname").addClass("error"),""==$(".dob").val()&&$(".dob").addClass("error")}),$("#emi").on("keyup",function(e){$(".emi").removeClass("error"),$(".emi_inword").html(numberToWordConvertor(unformatMoney($("#emi").val())))}),$("#email").on("keyup",function(e){$(".email_error").text("Your email address is required for further communications"),$(".email").removeClass("error")}),$("#fullname").on("keyup",function(e){$(".email").removeClass("error")}),$(document).on("click",".continue_button",function(e){e.preventDefault(),validate_step1()}),$(document).on("click",".last_btn",function(e){e.preventDefault(),validate_step2()}),$(document).on("keypress","input[name='office_pincode']",function(e){return 1==formatValidatorNew(e,$(this),"","","",5,"","","","","")&&(jQueryAutoComplete($(this),office_pin_code),!0)}),$(document).on("keypress","input[name='pincode']",function(e){return 1==formatValidatorNew(e,$(this),"","","",5,"","","","","")&&(jQueryAutoComplete($(this),pin_code_array),!0)}),$(document).on("change","#employer_city",function(){changePinCodesByEmployerCity()}),changePinCodesByCity(),$(document).on("click","#post_quote_submit",submitLapPostQuote),$(document).on("focus",".employer_name",function(){fillDataByAutocomplete($(this),"company_name","get_employer_name","industry")}),$(document).on("blur",".employer_name",function(){var e=$(this).val();""==e||e.length<2||e.length>100||!e.match(/^\d*[a-zA-Z][a-zA-Z0-9\.&_\-\s]*$/)?pbError.add($(this)):pbError.remove($(this))}),$(document).on("click",".back",goToPreviousScreen),$(document).on("change","#loan_amt",function(){"0"!=$(this).val()?$(this).addClass("lap_loan_amt"):$(this).removeClass("lap_loan_amt")}),"0"!=$("#loan_amt").val()&&$("#loan_amt").addClass("lap_loan_amt")}),goToPreviousScreen=function(){showLoader("loading","display-block");var e=$(this).attr("field-value");$.ajax({type:"POST",url:"/"+page_action_url+"/",data:"step=backscreen&screen_show="+e,dataType:"json",success:function(e){"success"==e.status?(autolistener=0,$("#main_content").hide("1000",function(){$("#main_content").html(e.html),getSliderForAmountAndTenure(),$("#main_content").show("2000")}),showLoader("loading","display-none")):"error"==e.status&&($("#err-msg").html(e.error_message),$("#err-msg").addClass("message-error m5b"),window.scrollTo(0,100),showLoader("loading","display-none"))}})},fillDataByAutocomplete=function(e,a,t,r){$(e).autocomplete({source:function(e,r){$(this);var o,n=$(this.element),l=n.data("jqrequest");l&&l.abort(),"get_builder_name"==t?o={builder_name:e.term,step:t}:"get_employer_name"==t&&(o={employer_name:e.term,step:t}),n.data("jqrequest",$.ajax({url:"/common-request",dataType:"json",async:"false",mode:"abort",asyn:!1,data:o,beforeSend:function(){null!=document.getElementById("'"+a+"'_exists'")&&(document.getElementById("'"+a+"'_exists'").innerHTML='  <img height="20" src="/components/images/loading.gif">')},success:function(e){r($.map(e.html,function(e){return{label:e,value:e}})),null!=document.getElementById("'"+a+"'_exists'")&&(document.getElementById("'"+a+"'_exists'").innerHTML="")}}))},minLength:2,selectFirst:!0,selectOnly:!0,select:function(e,t){return $("#"+a).val(t.item.label),!0}}).keydown(function(e,t,o){if(13==e.which&&setTimeout(function(){$(".ui-autocomplete").css("display","none"),$("#"+r).focus()},500),(9==e.which||13==e.which)&&"none"!=$(".ui-autocomplete").css("display")){var n=$(".ui-autocomplete li:first a").html();return $("#"+a).val(n),!0}})},changePinCodesByCity=function(){var e=$(quote_element_object).attr("property_city"),a=$("#employer_city").val();""!=e&&e>0&&$.ajax({type:"POST",url:"/"+page_action_url+"/",data:"step=getpincodes&city_id="+e,dataType:"json",success:function(t){"success"==t.status&&(pin_code_array=t.pincode_data,a!=e&&null!=a||(office_pin_code=t.pincode_data))}})},changePinCodesByEmployerCity=function(){var e=$("#employer_city").val();""!=e&&e>0&&$.ajax({type:"POST",url:"/"+page_action_url+"/",data:"step=getpincodes&city_id="+e,dataType:"json",success:function(e){"success"==e.status&&(office_pin_code=e.pincode_data)}})};var currentRequest=null;function validateLapSubmitPostData(){var e=!0;null!=$("#co_borrower_first_name").val()&&$("#co_borrower_first_name").val(),null!=$("#co_borrower_last_name").val()&&$("#co_borrower_last_name").val();return $("#post_quote_lap_loan_form input, #post_quote_lap_loan_form select").each(function(){if(!$(this).hasClass("notnull")||""!=$(this).val()&&"0"!=$(this).val())if($(this).hasClass("required"))""!=$(this).val()?pbError.remove($(this)):(pbError.add($(this)),e=!1);else if($(this).hasClass("alpha")){0==alphaValidator($(this))&&(e=!1)}else if($(this).hasClass("employer_name")){var a=$(this).val();(""==a||a.length<2||a.length>100||!a.match(/^\d*[a-zA-Z][a-zA-Z0-9\.&_\-\s]*$/))&&(pbError.add($(this)),e=!1)}else if($(this).hasClass("required_address")){(""==(t=$.trim($(this).val()))||t.length<3||t.length>31||!t.match(address_pattern))&&(pbError.add($(this)),e=!1)}else if($(this).hasClass("address")){var t;""!=(t=$.trim($(this).val()))&&(t.length<3||t.length>31||!t.match(address_pattern))&&(pbError.add($(this)),e=!1)}else if($(this).hasClass("middleName")){var r=$(this).val();""!=r&&(r.length<3||r.length>31)&&(pbError.add($(this)),e=!1)}else if($(this).hasClass("pincode")){0==pincodeValidator($(this))&&(pbError.add($(this)),e=!1)}else if("pan_number"==$(this).attr("name")&&""!=$(this).val()){0==panValidator($(this))&&(e=!1)}else if("co_borrower_pan_number"==$(this).attr("name")&&""!=$(this).val()){0==panValidator($(this))&&(e=!1)}else"co_borrower_date_of_birth"==$(this).attr("name")?($(".coborrowerdatepick").hasClass("error")&&(e=!1,$("#co_borrower_date_of_birth_validator").addClass("validate_fail")),""==$("#co_borrower_day_of_birth").val()&&($("#co_borrower_day_of_birth").addClass("error"),$("#co_borrower_date_of_birth_validator").addClass("validate_fail"),e=!1),""==$("#co_borrower_month_of_birth").val()&&($("#co_borrower_month_of_birth").addClass("error"),$("#co_borrower_date_of_birth_validator").addClass("validate_fail"),e=!1),""==$("#co_borrower_year_of_birth").val()&&($("#co_borrower_year_of_birth").addClass("error"),$("#co_borrower_date_of_birth_validator").addClass("validate_fail"),e=!1)):"cibil_check"==$(this).attr("name")&&(0==$("#cibil_check").prop("checked")?($(".amex_text").addClass("amex_text_error"),FirstPageErrorHandler.addErrorIndicator($("#cibil_check")),e=!1):($(".amex_text").removeClass("amex_text_error"),FirstPageErrorHandler.removeErrorIndicator($("#cibil_check"))));else pbError.addForSelect($(this)),e=!1}),e}function submitLapPostQuote(){if("MSIE7"!=version&&"MSIE8"!=version&&"MSIE9"!=version&&"MSIE"!=version||$('input[type="text"]').each(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}),1==validateLapSubmitPostData()){showLoader("loading","display-block");var e=$("#post_quote_lap_loan_form").serialize();""!=$("#co_borrower_year_of_birth").val()&&(e+="&complete_date_of_birth="+$("#co_borrower_year_of_birth").val()+"-"+$("#co_borrower_month_of_birth").val()+"-"+$("#co_borrower_day_of_birth").val()),e+="&step=post_application",$.post("/"+page_action_url+"/",e,"","json").done(function(e){"success"==e.status?(autolistener=0,$("#main_content").hide(1e3,function(){$("#main_content").html(e.html),$("#main_content").show(1500),showLoader("loading","display-none"),$("body,html").animate({scrollTop:125},800)})):null!=e.redirect_url?window.location=e.redirect_url:showLoader("loading","display-none")})}else"MSIE7"!=version&&"MSIE8"!=version&&"MSIE9"!=version&&"MSIE"!=version||$('input[type="text"]').each(function(){""==$(this).val()&&$(this).val($(this).attr("placeholder"))}),setTimeout(function(){showLoader("loading","display-none")},500)}function chooseCityId(e){$(".city_list li").removeClass("selected"),$(e).addClass("selected"),$(".property_city").val($(e).val()),$(".property_city_text").val($(e).text()),$(".property_city_text").addClass("valid"),$(".serch_open").addClass("hide"),$("#myInput").val(""),$("#myUL li").show()}function getSliderForAmountAndTenure(){$("#slider").slider({value:parseFloat($("#slider").attr("value")),min:parseFloat($("#slider").attr("min")),max:parseFloat($("#slider").attr("max")),step:parseFloat($("#slider").attr("step")),range:"min",slide:function(e,a){$("#amount").text(a.value)},stop:function(e,a){getSliderEligibility()}}),$("#amount").text($("#slider").slider("value")),$("#slider_loan_duration").slider({value:parseFloat($("#slider_loan_duration").attr("value")),min:parseFloat($("#slider_loan_duration").attr("min")),max:parseFloat($("#slider_loan_duration").attr("max")),step:parseFloat($("#slider_loan_duration").attr("step")),range:"min",slide:function(e,a){$("#loan_duration").text(a.value/1)},stop:function(e,a){getSliderEligibility()}}),$("#loan_duration").text($("#slider_loan_duration").slider("value")/1)}function getSliderEligibility(){showLoader("loading","display-block");var e="selectEligibility="+$("#amount").text()+"&selectTenure="+$("#loan_duration").text();$.ajax({type:"POST",url:"/"+page_action_url+"/",data:e+"&step=sliderrequest",dataType:"json",success:function(e){autolistener=0,"success"==e.status?($("#main_content").html(e.html),getSliderForAmountAndTenure(),showLoader("loading","display-none")):"error"==e.status&&($("#err-msg").html(e.error_message),$("#err-msg").addClass("message-error m5b"),window.scrollTo(0,100),showLoader("loading","display-none"))}})}function applyBank(e,a){showLoader("loading","display-block"),0==a&&$(".overlayClass").html("");var t=e;$.ajax({type:"POST",url:"/"+page_action_url+"/",data:"step=bankapply&applybankId="+t,dataType:"json",success:function(e){if(null!=e.pb_tracking_data){var t=e.pb_tracking_data.pb_tracker_no_of_banks,r=e.pb_tracking_data.pb_tracker_loan_amount,o=e.pb_tracking_data.pb_tracker_loan_tenure,n=e.pb_tracking_data.pb_tracker_selected_bank,l=customer_ID;_pb_tracker.trackEvent(["clevertab"],"LAP_Submitted_Quotes",{Tenure:"'"+o+"'","Loan Amount":"'"+r+"'","No of Quotes":"'"+t+"'","Selected Bank":"'"+n+"'","Customer ID":"'"+l+"'"})}"success"==e.status?0==a?(showLoader("loading","display-none"),showOverlay("overlay_message","display-block"),$(".overlayClass").html(e.error_message)):(autolistener=1,AutoListenerSave(1,0),$("#main_content").hide("1000",function(){$("#main_content").html(e.html),$("#main_content").show("2000"),showLoader("loading","display-none"),$("body,html").animate({scrollTop:125},800),$(e.additional_data_value).each(function(e,a){0==e?pin_code_array=a:office_pin_code=a})})):null!=e.redirect_url?window.parent.location=e.redirect_url:"error"==e.status&&($("#err-msg").html(e.error_message),$("#err-msg").addClass("message-error m5b"),window.scrollTo(0,100),showLoader("loading","display-none"))}})}function date_of_birth_validation(){var e=$(".dob").val().split("-"),a=!0,t=!0,r=!0,o=e[2],n=e[1],l=e[0];return""!=o&&""!=n&&""!=l&&(date_of_birth_yr=o<=18?"20"+o:"19"+o,a=dayValidation(l,n,date_of_birth_yr),t=monthValidation(n),r=yearValidation(date_of_birth_yr)),""!=o&&r&&""!=n&&t&&""!=l&&a?($(".dob").addClass("valid"),!0):($(".dob").val(""),$(".dob_error").text("Please enter valid date of birth"),$(".dob").addClass("error"),$(".dob").removeClass("valid"),!1)}function numberToWordConvertor(e){e=Math.floor(e);var a=new String(e);if(numReversed=a.split(""),actnumber=numReversed.reverse(),!(Number(e)>=0))return!1;if(0==Number(e))return"";if(actnumber.length>11)return!1;var t=["Zero"," One"," Two"," Three"," Four"," Five"," Six"," Seven"," Eight"," Nine"],r=["Ten"," Eleven"," Twelve"," Thirteen"," Fourteen"," Fifteen"," Sixteen"," Seventeen"," Eighteen"," Nineteen"],o=["dummy"," Ten"," Twenty"," Thirty"," Forty"," Fifty"," Sixty"," Seventy"," Eighty"," Ninety"],n=numReversed.length,l=new Array,s="";for(j=0,i=0;i<n;i++){switch(i){case 0:0==actnumber[i]||1==actnumber[i+1]?l[j]="":l[j]=t[actnumber[i]],l[j]=l[j]+" Only";break;case 1:d();break;case 2:0==actnumber[i]?l[j]="":0!=actnumber[i-1]&&0!=actnumber[i-2]?l[j]=t[actnumber[i]]+" Hundred and":l[j]=t[actnumber[i]]+" Hundred";break;case 3:0==actnumber[i]||1==actnumber[i+1]?l[j]="":l[j]=t[actnumber[i]],(0!=actnumber[i+1]||actnumber[i]>0)&&(l[j]=l[j]+" Thousand");break;case 4:d();break;case 5:0==actnumber[i]||1==actnumber[i+1]?l[j]="":l[j]=t[actnumber[i]],(0!=actnumber[i+1]||actnumber[i]>0)&&(l[j]=l[j]+" lac");break;case 6:d();break;case 7:0==actnumber[i]||1==actnumber[i+1]?l[j]="":l[j]=t[actnumber[i]],(0!=actnumber[i+1]||actnumber[i]>0)&&(l[j]=l[j]+" crore");break;case 8:d();break;case 9:0==actnumber[i]||1==actnumber[i+1]?l[j]="":l[j]=t[actnumber[i]],l[j]=l[j]+" billion";break;case 10:d()}j++}function d(){0==actnumber[i]?l[j]="":1==actnumber[i]?l[j]=r[actnumber[i-1]]:l[j]=o[actnumber[i]]}for(l.reverse(),i=0;i<l.length;i++)s+=l[i];return s=s.toLowerCase(),s=(s=$.trim(s)).substring(0,1).toUpperCase()+s.substring(1,s.length)}function calculateDaysLimit(e,a){var t="31";return month=parseInt(e),year=parseInt(a),"4"==month||"6"==month||"9"==month||"11"==month?t="30":"02"==month&&(t=""!=year&&parseInt(year)%4!=0?"28":"29"),t}function dayValidation(e,a,t){var r;return r=calculateDaysLimit(a,t),parseInt(e)>0&&parseInt(e)<=r&&parseInt(a)>0&&parseInt(t)>0}function monthValidation(e){var a=parseInt(e);return""!=a&&a>0&&a<=12}function yearValidation(e){var a=parseInt(e),t=(new Date).getFullYear();return""!=a&&a>1942&&a<t}function date_format(e){var a=e.split("-"),t=a[2],r=a[1],o=a[0];return t=t<=18?"20"+t:"19"+t,quote_date_of_birth=t+"/"+r+"/"+o,quote_date_of_birth}function myFunction(){var e,a,t;for(e=document.getElementById("myInput").value.toUpperCase(),a=document.getElementById("myUL").getElementsByTagName("li"),t=0;t<a.length;t++)a[t].innerHTML.toUpperCase().indexOf(e)>-1?a[t].style.display="":a[t].style.display="none"}function quote_info_submit(e){$("#loading").removeClass("display-none"),$("body").addClass("ofH p-F");var a,t=unformatMoney($("#loan_amt").val()),r=unformatMoney($("#property_cost").val()),o=$("#property_city").val(),n=unformatMoney($("#annual_income").val()),l=$("#mob_number").val(),s=$(quote_element_object_second).attr("employment_type_id"),i=$(quote_element_object_second).attr("property_type"),d=$(quote_element_object_second).attr("current_emi"),_=$(quote_element_object_second).attr("full_name"),c=$(quote_element_object_second).attr("date_of_birth"),m="";""!=c&&"0000-00-00"!=c&&"1970-01-01"!=c&&(m=date_format(c));var u=$(quote_element_object_second).attr("email"),p=$("input[name='property_approved_by']:checked").val(),v=$("#fullName").val(),y=$("#emailAddress").val();2==e&&(s=$("input[name='employment_type']:checked").val(),i=$("input[name='property_type']:checked").val(),d=unformatMoney($("#emi").val()),_=$("#fullname").val(),m=date_format(c=$(".dob").val()),u=$("#email").val(),_pb_tracker.trackEvent(["clevertab"],"LAP_Submitted_PQ2",{"Employement Type":"'"+s+"'","Property Type":"'"+i+"'","Customer ID":"'"+customer_ID+"'"})),a="emailAddress="+y+"&fullName="+v+"&loan_amount="+t+"&property_cost="+r+"&property_city="+o+"&annual_income="+n+"&property_approved_by="+p+"&mobile_number="+l+"&customer_name="+_+"&date_of_birth="+m+"&property_type="+i+"&email="+u+"&employment_type_id="+s+"&current_emi="+d,$.ajax({type:"POST",url:"/"+page_action_url+"/",data:a+"&form_no="+e+"&step=personal_information",dataType:"json",success:function(a){if("success"==a.status&&1==e){var r=$("#property_city").val(),o=unformatMoney($("#loan_amt").val());_pb_tracker.trackEvent(["clevertab"],"LAP_Submitted_PQ1",{"Property City":"'"+r+"'","Loan Amount":"'"+o+"'","Customer ID":"'"+customer_ID+"'"}),dataLayer.push({"LAP Loan Amount":o,"LAP Property City":r,"LAP FlowsFrom":page_action_url}),$("#loading").addClass("display-none"),$(".otp_modal_container").removeClass("hide"),$(".otp_modal_container, .otp-overlay").show(),$(".otp_digit_1").focus()}else if("otpverified"==a.status&&1==e){$("body").removeClass("ofH p-F");r=$("#property_city").val(),o=unformatMoney($("#loan_amt").val());_pb_tracker.trackEvent(["clevertab"],"LAP_Submitted_PQ1",{"Property City":"'"+r+"'","Loan Amount":"'"+o+"'","Customer ID":"'"+customer_ID+"'"}),$("#loading").addClass("display-none"),t<=15e5&&null!=a.redirect_url?window.parent.location=a.redirect_url:($(".step-1-form").hide(),$(".step-2-form").removeClass("hide"),_pb_tracker.trackEvent(["clevertab"],"LAP_VIEWED_PQ2",{"Customer ID":"'"+customer_ID+"'"}))}else null!=a.redirect_url?($("body").removeClass("ofH p-F"),$("#loading").addClass("display-none"),window.parent.location=a.redirect_url):($("body").removeClass("ofH p-F"),$("#loading").addClass("display-none"))}})}function validate_step1(){var e=!0,a=unformatMoney($("#loan_amt").val()),t=unformatMoney($("#property_cost")).val(),r=$("#property_city").val(),o=$(".property_city_text").val(),n=unformatMoney($("#annual_income")).val(),l=$("#mob_number").val(),s=formatValidatorNew("",$("#mob_number"),"","","",19,"","","","",""),i=$("input[name='property_approved_by']:checked").val(),d=$("#emailAddress").val(),_=formatValidatorNew("",$("#emailAddress"),"","","",20,"","",6,31,""),c=$("#fullName").val();if("FILED_MANIOULATE"==bureauCustomer&&a<=15e5){c=c.replace(/^\s+|\s+$/g,""),$(".fullName_pq1").val(c);var m=c.split(" ");(""===c||c.length<3||m.length<2)&&($("#fullName").addClass("error"),e=!1),""!=d&&_||($("#emailAddress").addClass("error"),e=!1)}if(""!=a&&0!=a||($(".loan_amt").addClass("error"),$("#loan_amt").val("0"),e=!1),$("#termsuses").is(":checked")||($(".termsuses").addClass("error"),$("#termsuses").val("0"),e=!1),""!=a&&0!=a||($(".loan_amt").addClass("error"),$("#loan_amt").val("0"),e=!1),""!=r&&0!=r&&""!=o||($(".property_city_text").addClass("error"),$("#property_city").val(""),e=!1),""==t||0==t)$(".property_cost").addClass("error"),$("#property_cost").val(""),e=!1;else{var u=unformatMoney($("#loan_amt").val()),p=unformatMoney($("#property_cost").val()),v=0;v=75e4==u?1e5:175e4==u?15e5:25e5==u?2e6:4e6==u?3e6:625e4==u?5e6:75e5,parseInt(p)<parseInt(v)&&($("#property_cost").val(""),$(".property_cost_inword").html(""),$(".property_cost_error").text("Property Cost should be greater than loan amount"),$("#property_cost").addClass("error"),e=!1)}""!=n&&0!=n||($(".annual_income").addClass("error"),$("#annual_income").val(""),e=!1),""!=a&&a<=15e5&&(null==i||""==i)&&($(".property_approved_by").addClass("error"),e=!1),""!=l&&s||($(".mobile_number_verification").hide(),$("#mob_number").val(""),$(".mob_number").addClass("error"),e=!1),e&&quote_info_submit(1)}function validate_step2(){var e=$("input[name='employment_type']:checked").val(),a=$("input[name='property_type']:checked").val(),t=$("#fullname").val(),r=(t=t.replace(/^\s+|\s+$/g,"")).split(" "),o=$("#email").val(),n=formatValidatorNew("",$("#email"),"","","",20,"","",6,31,""),l=$(".dob").val().split("-"),s=!0,i=!0,d=!0,_=l[2],c=l[1],m=l[0];""!=_&&""!=c&&""!=m&&(date_of_birth_yr=_<=18?"20"+_:"19"+_,s=dayValidation(m,c,date_of_birth_yr),i=monthValidation(c),d=yearValidation(date_of_birth_yr));var u=!0;""==e&&(u=!1),""==a&&(u=!1),(""===t||t.length<3||r.length<2)&&($(".fullname").addClass("error"),$("#fullname").val(""),u=!1),""!=_&&d&&""!=c&&i&&""!=m&&s||($(".dob").val(""),$(".dob").addClass("error"),u=!1),""!=o&&n||($("#email").val(""),$(".email").addClass("error"),u=!1),u&&quote_info_submit(2)}function proceedBanks(){var e=$(".210_checkbox").is(":checked"),a=$(".320_checkbox").is(":checked"),t=1,r=1;if(!e&&!a)return $(".newJrny").find("li.last-child").addClass("--error"),$("#proceedBanksErrorMsg").text("*Please select atleast one bank"),!1;showLoader("loading","display-block"),$("#proceedBanksErrorMsg").text(""),e||(t=0),a||(r=0),$.ajax({type:"POST",url:"/loan-against-property/",data:"step=proceedbanks&iifl_bank="+t+"&india_shelter_bank="+r,dataType:"json",success:function(e){if(null!=e.pb_tracking_data){var a=e.pb_tracking_data.pb_tracker_banks,t=e.pb_tracking_data.pb_tracker_loan_amount,r=e.pb_tracking_data.pb_tracker_lead_id,o=customer_ID;_pb_tracker.trackEvent(["clevertab"],"LAP_Submitted_Quotes",{"Loan Amount":"'"+t+"'","Selected Banks":"'"+a+"'","Customer ID":"'"+o+"'","PB Lead Id":"'"+r+"'"})}"success"==e.status?(showLoader("loading","display-none"),null!=e.redirect_url&&(window.parent.location=e.redirect_url)):"error"==e.status&&($("#err-msg").html(e.error_message),$("#err-msg").addClass("message-error m5b"),window.scrollTo(0,100),showLoader("loading","display-none"),null!=e.redirect_url&&(window.parent.location=e.redirect_url))}})}function checkCustomerBureau(){var e=$("#loan_amt").val(),a=$("#mob_number").val();""!=e&&null!=e&&e<=15e5&&e>0&&null!=a&&""!=a&&a>0&&formatValidatorNew("",$("#mob_number"),"","","",19,"","","","","")&&(showLoader("loading","display-block"),$.ajax({type:"POST",url:"/"+page_action_url+"/",data:"step=checkCustomerBureau&mobile_number="+a,dataType:"json",success:function(e){0==e.status?($("#bureau_fileds").removeClass("display-none"),bureauCustomer="FILED_MANIOULATE",showLoader("loading","display-none")):1==e.status&&(bureauCustomer="FILED_NOT_MANIOULATE",$("#bureau_fileds").addClass("display-none"),$("#full_name_pq1").val(""),$("#email_pq1").val(""),showLoader("loading","display-none"))}}))}AutoListenerSave=function(e,a){var t=new Object;$('input[type="text"]').each(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}),autolistener>0&&($("#post_quote_lap_loan_form input, #post_quote_lap_loan_form select").each(function(){switch($(this).attr("name")){case"first_name":1==formatValidatorNew("",$(this),"","","",1,"","",2,31,"")&&$(t).attr("first_name",$(this).val());break;case"middle_name":1==formatValidatorNew("",$(this),"","","",1,"","",2,31,"")&&$(t).attr("middle_name",$(this).val());break;case"last_name":1==formatValidatorNew("",$(this),"","","",1,"","",2,31,"")&&$(t).attr("last_name",$(this).val());break;case"gender":1==formatValidatorNew("",$(object),"","","",4,1,2,"","","")&&"0"!=$(this).val()&&$(t).attr("gender",$(this).val());break;case"address_line1":""!=(e=$.trim($(this).val()))&&e.length>4&&e.length<32&&e.match(address_pattern)&&$(t).attr("address_line1",e);break;case"address_line2":var e;""!=(e=$.trim($(this).val()))&&e.length>4&&e.length<32&&e.match(address_pattern)&&$(t).attr("address_line2",e);break;case"pincode":1==formatValidatorNew("",$(this),"","","",5,"","",6,6,"")&&$(t).attr("pincode",$(this).val());break;case"company_name":var a=$(this).val();""!=a&&a.length>4&&a.length<51&&a.match(/^\d*[a-zA-Z][a-zA-Z0-9\.&_\-\s]*$/)&&$(t).attr("company_name",a);break;case"industry":""!=$(this).val()&&"0"!=$(this).val()&&$(t).attr("industry",$(this).val());break;case"office_address_1":""!=(r=$(this).val())&&r.length>4&&r.length<32&&r.match(address_pattern)&&$(t).attr("office_address_1",r);break;case"office_address_2":var r;""!=(r=$(this).val())&&r.length>4&&r.length<32&&r.match(address_pattern)&&$(t).attr("office_address_2",r);break;case"office_pincode":1==formatValidatorNew("",$(this),"","","",5,"","",6,6,"")&&$(t).attr("office_pincode",$(this).val());break;case"pan_number":var o=$(this).val();""!=$(this).val()&&10==o.length&&isPAN(o)&&$(t).attr("pan_number",$(this).val());break;case"state":""!=$(this).val()&&0!=$(this).val()&&$(t).attr("state",$(this).val());break;case"employer_city":""!=$(this).val()&&0!=$(this).val()&&$(t).attr("employer_city",$(this).val());break;case"co_borrower_first_name":if(""!=$(this).val())1==formatValidatorNew("",$(this),"","","",1,"","",2,31,"")&&$(t).attr("co_borrower_first_name",$(this).val());break;case"co_borrower_last_name":if(""!=$(this).val())1==formatValidatorNew("",$(this),"","","",1,"","",2,31,"")&&$(t).attr("co_borrower_last_name",$(this).val());break;case"co_borrower_date_of_birth":if(""!=$("#co_borrower_day_of_birth").val())var n=formValidator.dayValidate("#co_borrower_day_of_birth");if(""!=$("#co_borrower_month_of_birth").val())var l=formValidator.monthValidate("#co_borrower_month_of_birth");if(""!=$("#co_borrower_year_of_birth").val())var s=formValidator.yearValidate("#co_borrower_year_of_birth");if(1==n&&1==l&&1==s){var i=$("#co_borrower_year_of_birth").val()+"_"+$("#co_borrower_month_of_birth").val()+"_"+$("#co_borrower_day_of_birth").val();$(t).attr("complete_date_of_birth",i)}break;case"co_borrower_pan_number":o=$(this).val();""!=$(this).val()&&10==o.length&&isPAN(o)&&$(t).attr("co_borrower_pan_number",$(this).val())}}),$(t).attr("step","auto_listener"),$(t).attr("save_form_Data",a),currentRequest=jQuery.ajax({type:"POST",data:t,dataType:"json",url:"/"+page_action_url+"/",beforeSend:function(){null!=currentRequest&&1==e&&currentRequest.abort()},success:function(a){"success"==a.status&&1==e&&(t=new Object,setTimeout(function(){AutoListenerSave(1,0)},1e4))}}))},jQueryAutoComplete=function(e,a){$(e).autocomplete({source:a,delay:0,open:function(){$(".ui-menu").width(250)}})},pbError={add:function(e){$(e).addClass("error"),$("#"+$(e).attr("id")+"_validator").addClass("validate_fail")},remove:function(e){$(e).removeClass("error"),$(e).parent().removeClass("error"),$("#"+$(e).attr("id")+"_validator").removeClass("validate_fail")},addForSelect:function(e){"MSIE7"==version?($(e).parent().css("border","2px solid #dc6767 !important"),$(e).parent().css("width","271px !important")):$(e).parent().addClass("error"),$("#"+$(e).attr("id")+"_validator").addClass("validate_fail")},removeForSelect:function(e){$(e).removeClass("error"),$(e).parent().removeClass("error"),$("#"+$(e).attr("id")+"_validator").removeClass("validate_fail")},right:function(){}},FirstPageErrorHandler={addError:function(e,a){$(e).parent().addClass("error"),$(e).parent().removeClass("selected"),FirstPageErrorHandler.addErrorIndicator($(e),a)},removeError:function(e){$(e).parent().removeClass("error"),$(e).parent().addClass("selected"),FirstPageErrorHandler.removeErrorIndicator($(e))},addErrorIndicator:function(e,a){$("#"+$(e).attr("name")+"_error_indicator").removeClass("hide"),$("#"+$(e).attr("name")+"_error_message").text(a)},removeErrorIndicator:function(e){$("#"+$(e).attr("name")+"_error_indicator").addClass("hide"),$("#"+$(e).attr("name")+"_error_message").text("")}},alphaValidator=function(e){var a=formatValidatorNew("",$(e),"","","",1,"","",2,31,"");return 0==a?pbError.add($(e)):pbError.remove($(e)),a},pincodeValidator=function(e){var a=formatValidatorNew("",$(e),"","","",5,"","",6,6,"");return 0==a?(pbError.add($(e)),a=!1):(pbError.remove($(e)),a=!0),a},genderValidator=function(e){var a=formatValidatorNew("",$(e),"","","",4,1,2,"","","");return 0==a?pbError.addForSelect($(e)):pbError.removeForSelect($(e)),a},panValidator=function(e){var a=1,t=$(e).val();return pbError.remove($(e)),""!=$(e).val()&&(10==t.length&&isPAN(t)?(pbError.remove($(e)),a=1):(a=0,pbError.add($(e)))),a},verifyOTPCode=function(){$("#loading").removeClass("display-none"),$("body").addClass("ofH p-F");var e=$("#mob_number").val(),a=$(".otp_digit_1").val()+""+$(".otp_digit_2").val()+$(".otp_digit_3").val()+$(".otp_digit_4").val(),t=unformatMoney($("#loan_amt").val()),r=($("input[name='property_approved_by']:checked").val(),"mobile_number="+e+"&otp_code="+a+"&thankyou_screen=0&fullName="+$("#fullName").val()+"&emailAddress="+$("#emailAddress").val()+"&loan_amount="+$("#loan_amt").val());$.ajax({type:"POST",url:"/"+page_action_url+"/",data:r+"&step=validate_otp_code",dataType:"json",success:function(e){"success"==e.status?($("body").removeClass("ofH p-F"),$("#loading").addClass("display-none"),$(".otp_modal_container, .otp-overlay").hide(),_pb_tracker.trackEvent(["clevertab"],"LAP_VIEWED_PQ2",{"Customer ID":"'"+customer_ID+"'"}),t<=15e5&&null!=e.redirect_url?window.parent.location=e.redirect_url:($(".step-1-form").hide(),$(".step-2-form").removeClass("hide"))):"error"==e.status&&($("#loading").addClass("display-none"),$("body").removeClass("ofH p-F"),$(".otp_digit_1").val("").addClass("otp_eror"),$(".otp_digit_2").val("").addClass("otp_eror"),$(".otp_digit_3").val("").addClass("otp_eror"),$(".otp_digit_4").val("").addClass("otp_eror"),$("#error_otp").removeClass("hide"),$(".otp_digit_1").focus())}}),$("#loading").addClass("display-none"),$("body").removeClass("ofH p-F")},sendOTPCode=function(e){$.ajax({type:"POST",url:"/"+page_action_url+"/",data:"mobile_number="+e+"&step=otp_code",dataType:"json",success:function(e){"success"==e.status||e.status}})},toggleT=function(){"hide"==$("#more_plus").attr("class")?($("#more_plus").removeClass("hide"),$("#moretext").text("Less-")):($("#more_plus").addClass("hide"),$("#moretext").text("More+"))};