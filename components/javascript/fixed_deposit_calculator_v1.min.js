function NewMoneyFormatInr(r){var e=null;if((r=r.toString().replace(/,/g,""))>0){var t="";(r=r.toString()).indexOf(".")>0&&(t=r.substring(r.indexOf("."),r.length));var a=(r=(r=Math.floor(r)).toString()).substring(r.length-3),o=r.substring(0,r.length-3);""!=o&&(a=","+a),e=o.replace(/\B(?=(\d{2})+(?!\d))/g,",")+a+t}else e=0;return e}function removeExtraSpaces(r){var e=$(r).val();e=e.replace(/(^\s*)|(\s*$)/gi,"").replace(/[ ]{2,}/gi," "),$(r).val(e)}function calculateData(){var r=$("#deposit_amount").val(),e=$("#rate_of_interest").val(),t=$("#duration").val(),a="months"!=$("#tenure_type").find("option:selected").val()?12*t:t;return calcualte_maturity_amount(unformatMoney(r),e,a)}function calcualte_maturity_amount(r,e,t){var a=12*(t/12),o=1+e/100/12,n=(r*Math.pow(o,a)).toFixed(2);return parseInt(n)}function calcualte_recurring_deposit_amountt(r,e,t){var a=t,o=parseInt(r)*((Math.pow(e/400+1,a)-1)/(1-Math.pow(e/400+1,-1/3)));return parseInt(o)}function calcualte_recurring_deposit_amount(r,e,t){for(var o=r,n=t,i=[],s=calculate_x(e,12),l=n;l>=1;l--)a=o*Math.pow(s,12*calculate_months_in_year(l)),i.push(a);var d=i.reduce(function(r,e,t,a){return r+e});return Math.round(d)}function calculate_x(r,e){return 1+r/100/e}function calculate_months_in_year(r){return r/12}$(document).on("keypress","#rate_of_interest",function(){return formatValidatorNew(event,$(this),"","","",22,"","",2,80,"")}),$(document).on("keyup","#deposit_amount",function(){$(this).attr("key-value",$(this).val()),$(this).val(rupeeFormat($(this).val()))}),$(document).on("keypress","#duration",function(){return formatValidatorNew(event,$(this),"","","",5,"","",2,80,"")}),$(document).on("keypress","input[name='customer_name']",function(r){return formatValidatorNew(r,$(this),"","","",2,"","",2,80,"")}),$(document).on("keypress","input[name='mobile_number'], input[name='new_mobile_number']",function(r){return formatValidatorNew(r,$(this),"","","",19,"","",10,10,"")}),$(document).on("keypress","input[name='email']",function(r){return formatValidatorNew(r,$(this),"","","",20,"","","","","")}),$(document).on("click",".fix_close",function(){$(".fix_banner").addClass("hide")}),$(document).on("click",".refresh",function(){$(".cal_eror_box").remove(),$(".cal-elem-div").removeClass("eror"),$("html, body").animate({scrollTop:0},500),$("#deposit_amount").val(""),$("#rate_of_interest").val(""),$("#duration").val(""),$("#tenure_type option").prop("selected",function(){return this.defaultSelected}),$("#tenure_type").selectpicker("render"),$("#show_principal").html('<i class="icon-inr">`</i> 0'),$("#show_maturity").html('<i class="icon-inr">`</i> 0'),$("#show_roi").html('<i class="icon-inr">`</i> 0')}),$(document).on("click","#scroll_btn",function(){$(".fix_banner").addClass("hide"),$("html, body").animate({scrollTop:$("#form_id").offset().top},500)}),$(document).ready(function(){$("input[type=text]").blur(function(){removeExtraSpaces($(this))}),$("#city_name").selectpicker("render"),$("#calForm").validate({ignore:".ignore",errorClass:"cal_eror_box",errorElement:"div",highlight:function(r){$(r).closest(".cal-elem-div").addClass("eror")},errorPlacement:function(r,e){"city_name"==$(e).attr("name")?r.insertAfter($(".city_error_box")):r.insertAfter($(e))},unhighlight:function(r){$(r).closest(".cal-elem-div").removeClass("eror")},rules:{deposit_amount:{required:!0,regx:/[^0]+/,maxlength:10},rate_of_interest:{required:!0,regx:/[^0]+/,max:10},duration:{required:!0,regx:/[^0]+/,max:function(){return"months"==$("#tenure_type").find("option:selected").val()?600:50}},tenure_type:{required:!0}},messages:{deposit_amount:{required:"Enter deposit amount",regx:"Enter valid deposit amount",maxlength:"Deposit amount should be less than 10 lacs"},rate_of_interest:{required:"Enter rate of interest",regx:"Enter valid rate of interest",max:"Rate of interest should be less than 10%"},duration:{required:"Enter tenure duration",regx:"Enter valid tenure duration"},tenure_type:{required:"Select tenure type"}}}),$("#calForm input, #calForm select").on("blur change",function(r,e){$(this).valid()}),$("#preQuote").validate({ignore:".ignore",errorClass:"eror_box",errorElement:"div",highlight:function(r){$(r).closest(".elem-div").addClass("eror")},errorPlacement:function(r,e){"city_name"==$(e).attr("name")?r.insertAfter($(e)):"consent_chkbox"!=$(e).attr("name")&&"income"!=$(e).attr("name")&&"mob_aadhaar_linked"!=$(e).attr("name")&&"employment_type_id"!=$(e).attr("name")&&r.insertAfter($(e))},unhighlight:function(r){$(r).closest(".elem-div").removeClass("eror")},rules:{customer_name:{required:!0,regx:/^([A-Za-z]+ )+[A-Za-z]+$/},mobile_number:{required:!0,regx:/^[6789]\d{9}$/},city_name:{required:!0},consent_chkbox:{required:!0}},messages:{customer_name:{required:"Enter your name",regx:"Enter valid name"},mobile_number:{required:"Enter your mobile number",regx:"Enter valid mobile number"},email:{required:"Enter your email",regx:"Email not valid"}}}),$("#preQuote input, #preQuote select").on("blur change",function(r,e){$(this).valid()}),$.validator.addMethod("regx",function(r,e,t){return r.match(t)})}),$(document).on("click",".cal_bttn",function(){if($("#calForm").valid()){var r=$("#deposit_amount").val(),e=($("#rate_of_interest").val(),$("#duration").val(),$("#tenure_type").find("option:selected").val(),calculateData()),t=unformatMoney(e)-unformatMoney(r);$("#show_principal").html('<i class="icon-inr">`</i> '+NewMoneyFormatInr(r)),$("#show_maturity").html('<i class="icon-inr">`</i> '+NewMoneyFormatInr(e)),$("#show_roi").html('<i class="icon-inr">`</i> '+NewMoneyFormatInr(t)),$("html, body").animate({scrollTop:$(".cal_bttn").offset().top},500),setTimeout(function(){$(".fix_banner").removeClass("hide")},1e3)}else $("html, body").animate({scrollTop:0},500)}),$(document).on("click",".next_btn",function(){var r=$("#preQuote").valid();r||$("html, body").animate({scrollTop:$("#preQuote").offset().top},500);var e=$("#customer_name").val(),t=($("#city_name").find("option:selected").text(),$("#mobile_number").val()),a="customer_name="+e+"&city_name="+$("#city_name").val()+"&mobile_number="+t;r&&(_pb_tracker.trackEvent(["clevertap"],"FD_ClickedOnSubmit ",{Description:"FD Calculator Form Submitted"}),$(".next_btn").addClass("hide"),$(".loader_btn").removeClass("hide"),$.ajax({type:"POST",url:"/"+page_action_url+"/",data:a+"&step=pre_quote_apply",dataType:"json",success:function(r){"success"==r.status?setTimeout(function(){window.parent.location=r.redirect_url},1e3):null!=r.redirect_url?setTimeout(function(){window.parent.location=r.redirect_url},1e3):"error"==r.status&&($("#prequotepage_error").removeClass("hide"),$("#prequotepage_error").html(r.error_message),$("html, body").animate({scrollTop:50},"1000"),$(".loader_btn").addClass("hide"),$(".next_btn").removeClass("hide"))},error:function(){$(".loading_btn").addClass("hide")}}))}),rupeeFormat=function(r){if(o=null,(r=unformatMoney(r))>0){var e="";(r=r.toString()).indexOf(".")>0&&(e=r.substring(r.indexOf("."),r.length));var t=(r=(r=Math.floor(r)).toString()).substring(r.length-3),a=r.substring(0,r.length-3);""!=a&&(t=","+t);var o=a.replace(/\B(?=(\d{2})+(?!\d))/g,",")+t+e}else o=0;return o},$(document).on("keyup","#day_of_birth",function(r){2==$(this).val().length&&$("#month_of_birth").focus()}),$(document).on("keyup","#month_of_birth",function(r){2==$(this).val().length&&$("#year_of_birth").focus()}),$(document).on("keydown","#year_of_birth",function(r){8!=r.which&&46!=r.which&&37!=r.which||""!=$(this).val()||$("#month_of_birth").focus()}),$(document).on("keydown","#month_of_birth",function(r){8!=r.which&&46!=r.which&&37!=r.which||""!=$(this).val()||$("#day_of_birth").focus()}),$(document).on("blur","#day_of_birth",function(){var r=$(this).val();$(this).val().length>0&&$(this).val().length<2?"Opera"!=version&&"MSIE7"!=version&&"MSIE8"!=version&&"MSIE9"!=version&&"MSIE"!=version&&(r=parseInt(0)+r,$(this).val(r)):"Opera"!=version&&"MSIE7"!=version&&"MSIE8"!=version&&"MSIE9"!=version&&"MSIE"!=version||"dd"!=r&&(r=Number(r),$(this).val(r)),formValidator.dayValidate($(this))}),$(document).on("blur","#month_of_birth",function(){var r=$(this).val();$(this).val().length>0&&$(this).val().length<2?"Opera"!=version&&"MSIE7"!=version&&"MSIE8"!=version&&"MSIE9"!=version&&"MSIE"!=version&&(r=parseInt(0)+r,$(this).val(r)):"Opera"!=version&&"MSIE7"!=version&&"MSIE8"!=version&&"MSIE9"!=version&&"MSIE"!=version||"mm"!=r&&(r=Number(r),$(this).val(r)),formValidator.monthValidate($(this))}),$(document).on("blur","#year_of_birth",function(){formValidator.yearValidate($(this))}),formValidator={yearValidate:function(r){var e,t=new Date,a=t.getFullYear()-65,o=t.getFullYear()-18,n=$(r).prev(),i=$(n).prev();return 1==(e=formatValidatorNew("",$(r),"","","","4",a,o,"","",""))?($(r).removeClass("error"),FirstPageError.remove($(r),"data-validation-error-msg")):($(r).addClass("error"),FirstPageError.add($(r),"data-validation-error-msg")),parseInt($(n).val())<=0&&($(n).addClass("error"),FirstPageError.add($(r),"data-validation-error-msg")),parseInt($(i).val())<=0?($(i).addClass("error"),FirstPageError.add($(r),"data-validation-error-msg")):formValidator.dayValidate(i),e?$(".dob_error_msg").addClass("hide"):$(".dob_error_msg").removeClass("hide"),e},monthValidate:function(r){var e=parseInt($(r).next()),t=parseInt($(r).prev()),a=formatValidatorNew("",$(r),"","","","5",1,12,"","","");return 1==a?($(r).removeClass("error"),FirstPageError.remove($(e))):($(r).addClass("error"),FirstPageError.add($(r),"data-validation-error-msg")),parseInt($(t).val())<=0?($(t).addClass("error"),FirstPageError.add($(e),"data-validation-error-msg")):formValidator.dayValidate(t),a?$(".dob_error_msg").addClass("hide"):$(".dob_error_msg").removeClass("hide"),a},dayValidate:function(r){var e,t=$(r).next(),a=$(t).next();e=dateValidate.calculateDays($(t).val(),$(a).val());var o=formatValidatorNew("",$(r),"","","","4","1",e,"","","");return 1==o?($(r).removeClass("error"),$(a).hasClass("error")||$(t).hasClass("error")||FirstPageError.remove($(a))):($(r).addClass("error"),FirstPageError.add($(a),"data-validation-error-msg")),o?$(".dob_error_msg").addClass("hide"):$(".dob_error_msg").removeClass("hide"),o},quoteFullFormValidator:function(){var r=!0;return $(".datepick").hasClass("error")&&(r=!1),(""==$("#").val()||isNaN($("#day_of_birth").val()))&&(FirstPageError.add($("#year_of_birth"),"data-validation-error-msg"),r=!1),(""==$("#").val()||isNaN($("#month_of_birth").val()))&&(FirstPageError.add($("#year_of_birth"),"data-validation-error-msg"),r=!1),(""==$("#year_of_birth").val()||isNaN($("#year_of_birth").val()))&&(FirstPageError.add($("#year_of_birth"),"data-validation-error-msg"),r=!1),r}},FirstPageError={add:function(r,e){errorspan=$(r).parent("div").next(".date_eror_msg").attr("class"),null==errorspan?($("span[class*='error_indicator']",$(r).parents(".form-group")).addClass("form-error").html($(r).attr(e)).parents(".form-group").addClass("has-error"),$(r).next(".date_eror_msg").addClass("form-error").html($(r).attr(e)).parents(".form-group").addClass("has-error")):($(r).parent("div").next(".date_eror_msg").addClass("form-error").html($(r).attr(e)).parents(".form-group").addClass("has-error"),$(r).parent("div").parent("div").next(".date_eror_msg").addClass("form-error").html($(r).attr(e)).parents(".form-group").addClass("has-error"))},remove:function(r){$(r).removeClass("error").parent("div").next(".date_eror_msg").removeClass("form-error").html("").parents(".form-group").removeClass("has-error"),$(r).removeClass("error").parent("div").parent("div").next(".date_eror_msg").removeClass("form-error").html("").parents(".form-group").removeClass("has-error")},addForSelect:function(r,e){errorspan=$(r).parent("div").next(".date_eror_msg").attr("class"),null==errorspan?($("span[class*='error_indicator']",$(r).parents(".form-group")).addClass("form-error").html($(r).attr(e)).parents(".form-group").addClass("has-error"),$(r).next(".date_eror_msg").addClass("form-error").html($(r).attr(e)).parents(".form-group").addClass("has-error")):($(r).parent("div").next(".date_eror_msg").addClass("form-error").html($(r).attr(e)).parents(".form-group").addClass("has-error"),$(r).parent("div").parent("div").next(".date_eror_msg").addClass("form-error").html($(r).attr(e)).parents(".form-group").addClass("has-error"))},removeForSelect:function(r){$(r).removeClass("error").parent("div").next(".date_eror_msg").removeClass("form-error").html("").parents(".form-group").removeClass("has-error"),$(r).removeClass("error").parent("div").parent("div").next(".date_eror_msg").removeClass("form-error").html("").parents(".form-group").removeClass("has-error")}},$(document).on("keypress","input[name='day_of_birth']",function(r){return formatValidatorNew(r,$(this),"","","day_of_birth",5,"","","","","")}),$(document).on("keypress","input[name='month_of_birth']",function(r){return formatValidatorNew(r,$(this),"","","month_of_birth",5,"","","","","")}),$(document).on("keypress","input[name='year_of_birth']",function(r){return formatValidatorNew(r,$(this),"","","year_of_birth",5,"","","","","")}),saveEMIResult=function(){"1"!=$("#slider_3_txt").val()&&"0"!=$("#slider_3_txt").val()||("months"==$("#slider_3").attr("suffix").trim()?$(".slider_3_span").text($("#slider_3_txt").val()+" month"):"yrs"==$("#slider_3").attr("suffix")&&$(".slider_3_span").text("1 yr"));var r=unformatMoney($("#maturity_amount").text()),e="months"!=$("#slider_3").attr("suffix")&&" months"!=$("#slider_3").attr("suffix")?12*$(".slider_3_txt").val():$(".slider_3_txt").val(),t={step:"SaveDepositResult",deposit_amount:unformatMoney($(".slider_1_txt").val()),rate_of_interest:$(".slider_2_txt").val(),deposit_tenure:e,maturity_amount:r,product_sub_id:product_sub_id,calculator_type:5};null==saveRes&&(saveRes=$.post("/deposit-calculator/",t,"","json").done(function(r){saveRes=null}))};